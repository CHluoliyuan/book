"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[959],{4959:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"80%"}},[t("div",{staticStyle:{"margin-bottom":"30px"}},[e._v("新增图书")]),t("el-form",{ref:"ruleForm",attrs:{inline:!0,rules:e.rules,model:e.form,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),t("el-form-item",{attrs:{label:"出版日期",prop:"publish_date"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择出版日期"},model:{value:e.form.publish_date,callback:function(t){e.$set(e.form,"publish_date",t)},expression:"form.publish_date"}})],1),t("el-form-item",{attrs:{label:"作者",prop:"author"}},[t("el-input",{attrs:{placeholder:"请输入作者"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),t("el-form-item",{attrs:{label:"出版社",prop:"publisher"}},[t("el-input",{attrs:{placeholder:"请输入出版社"},model:{value:e.form.publisher,callback:function(t){e.$set(e.form,"publisher",t)},expression:"form.publisher"}})],1),t("el-form-item",{attrs:{label:"分类",prop:"category_id"}},[t("el-cascader",{staticStyle:{width:"220px"},attrs:{props:{value:"id",label:"name"},options:e.categories},model:{value:e.form.category_id,callback:function(t){e.$set(e.form,"category_id",t)},expression:"form.category_id"}})],1),t("el-form-item",{attrs:{label:"数量",prop:"nums"}},[t("el-input",{attrs:{placeholder:"数量"},model:{value:e.form.nums,callback:function(t){e.$set(e.form,"nums",t)},expression:"form.nums"}})],1),t("el-form-item",{attrs:{label:"借书积分",prop:"cover"}},[t("el-input-number",{attrs:{min:10,max:30,label:"所需积分"},model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1),t("br"),t("el-form-item",{attrs:{label:"封面",prop:"cover"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://47.108.85.66/api/bookimgup?token="+this.admin.token,"show-file-list":!1,"on-success":e.handleCoverSuccess}},[e.form.cover?t("img",{staticClass:"avatar",attrs:{src:"http://47.108.85.66/api/"+e.form.cover,alt:""}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.save}},[e._v("提交")])],1)],1)},o=[],l=(r(1703),r(4471)),s=r(680),i={name:"AddBook",data(){const e=(e,t,r)=>{t=parseInt(t),(t<0||t>=1e3)&&r(new Error("请输入大于等于0小于1000的整数")),r()};return{admin:s.Z.get("admin")?JSON.parse(s.Z.get("admin")):{},form:{score:10,cover:""},categories:[],rules:{name:[{required:!0,message:"请输入图书名称",trigger:"blur"}],score:[{validator:e,trigger:"blur"}],nums:[{required:!0,message:"请输入数量",trigger:"blur"},{validator:e,trigger:"blur"}]}}},created(){l.Z.get("/category_list").then((e=>{this.categories=e.data.list}))},methods:{handleCoverSuccess(e){"200"===e.code&&(this.form.cover=e.data)},save(){this.form.category_id=this.form.category_id[0],this.$refs["ruleForm"].validate((e=>{e&&l.Z.post("/book_create",this.form).then((e=>{"200"===e.code?(this.$notify.success("新增成功"),this.$refs["ruleForm"].resetFields()):this.$notify.error(e.msg)}))}))}}},m=i,c=r(3736),n=(0,c.Z)(m,a,o,!1,null,null,null),u=n.exports}}]);
//# sourceMappingURL=959.5acbc0a5.js.map