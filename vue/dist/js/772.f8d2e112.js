"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[772],{5772:function(e,o,r){r.r(o),r.d(o,{default:function(){return u}});var s=function(){var e=this,o=e._self._c;return o("div",{staticStyle:{width:"80%"}},[o("div",{staticStyle:{"margin-bottom":"30px"}},[e._v("新增借书记录")]),o("el-form",{ref:"ruleForm",attrs:{inline:!0,rules:e.rules,model:e.form,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"图书编号",prop:"book_id"}},[o("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.selBook},model:{value:e.form.book_id,callback:function(o){e.$set(e.form,"book_id",o)},expression:"form.book_id"}},e._l(e.books,(function(e){return o("el-option",{key:e.id,attrs:{label:e.bookNo,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"图书名称",prop:"book_name"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.book_name,callback:function(o){e.$set(e.form,"book_name",o)},expression:"form.book_name"}})],1),o("el-form-item",{attrs:{label:"所需积分",prop:"book_score"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.book_score,callback:function(o){e.$set(e.form,"book_score",o)},expression:"form.book_score"}})],1),o("el-form-item",{attrs:{label:"图书数量",prop:"book_nums"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.book_nums,callback:function(o){e.$set(e.form,"book_nums",o)},expression:"form.book_nums"}})],1),o("br"),o("el-form-item",{attrs:{label:"会员码",prop:"user_id"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:e.selUser},model:{value:e.form.user_id,callback:function(o){e.$set(e.form,"user_id",o)},expression:"form.user_id"}},e._l(e.users,(function(e){return o("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"用户名称",prop:"user_name"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.user_name,callback:function(o){e.$set(e.form,"user_name",o)},expression:"form.user_name"}})],1),o("el-form-item",{attrs:{label:"用户联系方式",prop:"user_phone"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.user_phone,callback:function(o){e.$set(e.form,"user_phone",o)},expression:"form.user_phone"}})],1),o("el-form-item",{attrs:{label:"用户账户积分",prop:"user_account"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.user_account,callback:function(o){e.$set(e.form,"user_account",o)},expression:"form.user_account"}})],1),o("el-form-item",{attrs:{label:"借出的天数",prop:"days"}},[o("el-input-number",{attrs:{min:1,max:30,label:"借出的天数"},model:{value:e.form.days,callback:function(o){e.$set(e.form,"days",o)},expression:"form.days"}})],1)],1),o("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.save}},[e._v("提交")])],1)],1)},t=[],l=r(4471),a={name:"AddBook",data(){return{form:{days:1},books:[],users:[],rules:{book_id:[{required:!0,message:"请输入图书码",trigger:"blur"}],user_id:[{required:!0,message:"请输入会员码",trigger:"blur"}]}}},created(){l.Z.get("/book_list").then((e=>{this.books=e.data.list})),l.Z.get("/user_list").then((e=>{this.users=e.data.list}))},methods:{save(){console.log(this.form),this.$refs["ruleForm"].validate((e=>{e&&l.Z.post("/borrow_create",this.form).then((e=>{"200"===e.code?(this.$notify.success("新增成功"),this.$refs["ruleForm"].resetFields(),l.Z.get("/user_list").then((e=>{this.users=e.data.list})),l.Z.get("/book_list").then((e=>{this.books=e.data.list}))):this.$notify.error(e.msg)}))}))},selBook(){const e=this.books.find((e=>e.id===this.form.book_id));this.form.book_name=e.name,this.form.book_score=e.score,this.form.book_nums=e.nums},selUser(){const e=this.users.find((e=>e.id===this.form.user_id));this.form.user_name=e.name,this.form.user_phone=e.phone,this.form.user_account=e.account}}},i=a,n=r(3736),m=(0,n.Z)(i,s,t,!1,null,null,null),u=m.exports}}]);
//# sourceMappingURL=772.f8d2e112.js.map