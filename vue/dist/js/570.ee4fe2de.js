"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[570],{570:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});a(7658);var l=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"margin-bottom":"20px"}},[e("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入图书名称"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}}),e("el-input",{staticStyle:{width:"240px","margin-left":"5px"},attrs:{placeholder:"请输入图书标准码"},model:{value:t.params.id,callback:function(e){t.$set(t.params,"id",e)},expression:"params.id"}}),e("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:t.load}},[e("i",{staticClass:"el-icon-search"}),t._v(" 搜索")]),e("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning"},on:{click:t.reset}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" 重置")])],1),e("el-table",{attrs:{data:t.tableData,stripe:"","row-key":"id","default-expand-all":""}},[e("el-table-column",{attrs:{prop:"id",label:"编号",width:"80"}}),e("el-table-column",{attrs:{prop:"name",label:"图书名称"}}),e("el-table-column",{attrs:{prop:"description",width:"200",label:"描述"}}),e("el-table-column",{attrs:{prop:"publish_date",label:"出版日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.publish_date).toLocaleDateString().slice(0,10))+" ")]}}])}),e("el-table-column",{attrs:{prop:"author",label:"作者"}}),e("el-table-column",{attrs:{prop:"publisher",label:"出版社"}}),e("el-table-column",{attrs:{prop:"category_id",label:"分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.categories.find((t=>t.id===e.row.category_id))?.name||"未知分类")+" ")]}}])}),e("el-table-column",{attrs:{prop:"score",label:"借书积分"}}),e("el-table-column",{attrs:{prop:"nums",label:"数量"}}),e("el-table-column",{attrs:{prop:"cover",label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{attrs:{src:"http://localhost:8000/"+t.row.cover,"preview-src-list":["http://localhost:8000/"+t.row.cover]}})]}}])}),e("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/editBook?id="+a.row.id)}}},[t._v("编辑")]),e("el-popconfirm",{staticStyle:{"margin-left":"5px"},attrs:{title:"您确定删除这行数据吗？"},on:{confirm:function(e){return t.del(a.row.id)}}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),e("div",{staticStyle:{"margin-top":"20px"}},[e("el-pagination",{attrs:{background:"","current-page":t.params.page,"page-size":t.params.size,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},r=[],s=a(4471),o=a(680),n={name:"BookList",data(){return{categories:[],admin:o.Z.get("admin")?JSON.parse(o.Z.get("admin")):{},tableData:[],total:0,params:{page:1,size:5,name:"",id:""}}},created(){s.Z.get("/category_list").then((t=>{this.categories=t.data.list})),this.load()},methods:{load(){s.Z.get("/book_list",{params:this.params}).then((t=>{"200"===t.code&&(this.tableData=t.data.list,this.total=t.data.count)}))},reset(){this.params={page:1,size:10,name:"",id:""},this.load()},handleCurrentChange(t){this.params.page=t,this.load()},del(t){s.Z["delete"]("/book_delete",{params:{id:t}}).then((t=>{"200"===t.code?(this.$notify.success("删除成功"),this.load()):this.$notify.error(t.msg)}))}}},i=n,c=a(3736),p=(0,c.Z)(i,l,r,!1,null,"0d9e1df1",null),u=p.exports}}]);
//# sourceMappingURL=570.ee4fe2de.js.map